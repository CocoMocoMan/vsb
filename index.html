<!DOCTYPE html>
<title>Vampire Slayer Bros.</title>
<style>
  canvas{
      outline: 1px solid white;
  }
  body{
      background-color: darkslateblue;
      text-align: center;
      margin-top: 50px;
  }
</style>
<canvas></canvas>
<script src="js/game.js"></script>
<script src="js/map.js"></script>
<script src="js/tile.js"></script>
<script src="js/monster.js"></script>
<script src="js/util.js"></script>
<script src="js/itemdrop.js"></script>

<script>
  let audioPlayed = false;

  tileSize = 64;
  numTiles = 9;
  uiWidth = 4;
  level = 1;

  characterspritesheet = new Image();
  characterspritesheet.src = 'assets/sprites/characterspritesheet.png';
  tilespritesheet = new Image();
  tilespritesheet. src = 'assets/sprites/dungeontileset.png';
  tilespritesheet.onload = showTitle;
                             
  gameState = "loading";  
                         
  startingHp = 3; 
  numLevels = 6; 

  document.querySelector("html").onkeypress = function(e){
    if (!audioPlayed) {
      let audio = new Audio('assets/sounds/music.mp3');
      audio.play();
      audioPlayed = true;
    }
    if(gameState == "title"){                              
      startGame();                
    }
    else if(gameState == "dead"){                             
      showTitle();                                        
    }
    else if(gameState == "running") {
      if(e.key=="w") player.tryMove(0, -1);
      if(e.key=="s") player.tryMove(0, 1);
      if(e.key=="a") player.tryMove(-1, 0);
      if(e.key=="d") player.tryMove(1, 0);
      if(e.key=="z") player.useBead();
    }
  };

  setInterval(draw, 15);

  setupCanvas();
</script>